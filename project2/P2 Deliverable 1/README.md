# üß† TinyTroupe Persona Simulation App  
**Course:** CS 676 ‚Äî Advanced Data Systems  
**Deliverable 1:** Agentic AI Setup & Persona Simulation  
**Date:** October 17 2025  
**Author:** J. Mauldin  

---

## üìò Project Overview

This project explores **agentic AI** and **persona-based simulation** using Microsoft‚Äôs [TinyTroupe](https://github.com/microsoft/tinytroupe) framework.  
The goal is to create an **interactive Streamlit app** that allows users to:

1. Define or select personas (e.g., ‚ÄúCurious Student,‚Äù ‚ÄúSmall Business Owner‚Äù)  
2. Provide a **feature description** or product concept  
3. Simulate realistic user feedback conversations generated by AI  
4. Evaluate and export conversation results for UX or product analysis  

The system demonstrates how multi-agent simulations can be used to model realistic human feedback and reasoning diversity across persona types.

---

## ‚öôÔ∏è Key Components

| File | Purpose |
|:--|:--|
| `simulate.py` | Runs multi-turn persona conversations and records JSONL transcripts |
| `evaluate.py` | Analyzes conversation quality (Realism, Consistency, Diversity, Confidence) |
| `export_conversation_history.py` | Produces readable Markdown transcripts with metadata |
| `app.py` | Interactive Streamlit interface for non-technical users |
| `config.ini` | Custom TinyTroupe / OpenAI configuration |
| `stepup_walkthrough.md` | Full environment and setup instructions |
| `personas.json` | Defines default persona profiles used in testing |

---

## üß© Technologies Used
- **Python 3.10+**
- **TinyTroupe v0.5.2** (installed from GitHub)
- **OpenAI API** (`gpt-4o-mini`)
- **Streamlit 1.x**
- **Pandas / NumPy / Markdown I/O**

---

## üöÄ Quick Start

### 1Ô∏è‚É£ Setup Environment
```cmd
cd "C:\Users\jakem\Documents\GitHub\cs676\project2\P2 Deliverable 1"
python -m venv ..\.venv
..\.\.venv\Scripts\activate.bat
pip install -r requirements.txt
pip uninstall tinytroupe -y
pip install git+https://github.com/microsoft/tinytroupe.git
```

### 2Ô∏è‚É£ Configure OpenAI Key
```cmd
set OPENAI_API_KEY=sk-your-real-key-here
```

Verify:
```cmd
echo %OPENAI_API_KEY%
```

### 3Ô∏è‚É£ Create or Verify `config.ini`
```ini
[OpenAI]
api_type = openai
model = gpt-4o-mini
temperature = 0.7
timeout = 120
max_tokens = 2048
```

---

## üß† Run Simulations

```cmd
set FEATURE_TEXT=Order-tracking widget on receipts page
python simulate.py --turns 3 --personas personas.json --out runs\main_run.jsonl
```

Evaluate and export results:
```cmd
python evaluate.py --in runs\main_run.jsonl --report runs\main_report.md --personas personas.json
python export_conversation_history.py --in runs\main_run.jsonl --out conversation_history.md --personas personas.json
```

Expected outputs:

| File | Description |
|:--|:--|
| `runs\main_run.jsonl` | Raw conversation data |
| `runs\main_report.md` | Evaluation metrics |
| `conversation_history.md` | Annotated transcript with reasoning and follow-ups |

---

## üíª Launch Interactive App
```cmd
streamlit run app.py
```

Then open the provided localhost URL (e.g. `http://localhost:8501`).

Features:
- Input feature description  
- Select or add personas  
- Run simulation ‚Üí realistic chat interface  
- Evaluate results ‚Üí quality metrics table  
- Export transcript ‚Üí downloadable Markdown  

---

## üßæ Deliverable 1 Scope

This first deliverable focuses on:
1. **Environment setup and configuration**  
   - Installing TinyTroupe  
   - Managing dependencies  
   - Handling OpenAI credentials and config  
2. **Initial persona simulation**  
   - Demonstrating realistic conversation behavior  
   - Testing multiple personas and turn counts  
3. **Evaluation metrics and reporting**  
   - Generating realism, consistency, and diversity scores  
   - Saving annotated conversation histories  

Later deliverables will extend this prototype with:
- Batch persona comparisons  
- Visualization dashboards  
- Automated performance summaries  

---

## üß∞ Troubleshooting

| Issue | Likely Cause | Fix |
|:--|:--|:--|
| `openai.OpenAIError: api_key must be set` | Missing API key | Run `set OPENAI_API_KEY=sk-...` in the same CMD |
| `ModuleNotFoundError: tinytroupe` | Wrong version installed | `pip uninstall tinytroupe -y` then reinstall from GitHub |
| Config not detected | `config.ini` missing or misplaced | Ensure it‚Äôs in the same folder as `simulate.py` |
| Empty output | Network or API key issue | Verify key validity and connectivity |
| Activation error | PowerShell script policy | Run PowerShell as Admin ‚Üí `Set-ExecutionPolicy RemoteSigned` |

---

## ‚úÖ Deliverable Verification

- [x] TinyTroupe initialized with custom `config.ini`  
- [x] OpenAI API key recognized  
- [x] Simulation generates conversations  
- [x] Evaluation produces metrics report  
- [x] Conversation history exported  
- [x] Streamlit app functional  

---

**End of README**
